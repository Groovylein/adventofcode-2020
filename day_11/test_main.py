import os

from day_11 import main

current_dir = os.path.dirname(os.path.abspath(__file__))
test_input_file = os.path.join(current_dir, 'test_input.txt')
input_list = main.read_input(test_input_file)


def test_iteration():
    print(input_list)
    first_result_list = [['#', '.', '#', '#', '.', '#', '#', '.', '#', '#'],
                         ['#', '#', '#', '#', '#', '#', '#', '.', '#', '#'],
                         ['#', '.', '#', '.', '#', '.', '.', '#', '.', '.'],
                         ['#', '#', '#', '#', '.', '#', '#', '.', '#', '#'],
                         ['#', '.', '#', '#', '.', '#', '#', '.', '#', '#'],
                         ['#', '.', '#', '#', '#', '#', '#', '.', '#', '#'],
                         ['.', '.', '#', '.', '#', '.', '.', '.', '.', '.'],
                         ['#', '#', '#', '#', '#', '#', '#', '#', '#', '#'],
                         ['#', '.', '#', '#', '#', '#', '#', '#', '.', '#'],
                         ['#', '.', '#', '#', '#', '#', '#', '.', '#', '#']]
    first_iteration = main.do_iteration(input_list)
    assert first_iteration == first_result_list

    second_result_list = [['#', '.', 'L', 'L', '.', 'L', '#', '.', '#', '#'],
                          ['#', 'L', 'L', 'L', 'L', 'L', 'L', '.', 'L', '#'],
                          ['L', '.', 'L', '.', 'L', '.', '.', 'L', '.', '.'],
                          ['#', 'L', 'L', 'L', '.', 'L', 'L', '.', 'L', '#'],
                          ['#', '.', 'L', 'L', '.', 'L', 'L', '.', 'L', 'L'],
                          ['#', '.', 'L', 'L', 'L', 'L', '#', '.', '#', '#'],
                          ['.', '.', 'L', '.', 'L', '.', '.', '.', '.', '.'],
                          ['#', 'L', 'L', 'L', 'L', 'L', 'L', 'L', 'L', '#'],
                          ['#', '.', 'L', 'L', 'L', 'L', 'L', 'L', '.', 'L'],
                          ['#', '.', '#', 'L', 'L', 'L', 'L', '.', '#', '#']]

    second_iteration = main.do_iteration(first_result_list)
    assert second_iteration == second_result_list

    third_result_list = [['#', '.', '#', '#', '.', 'L', '#', '.', '#', '#'],
                         ['#', 'L', '#', '#', '#', 'L', 'L', '.', 'L', '#'],
                         ['L', '.', '#', '.', '#', '.', '.', '#', '.', '.'],
                         ['#', 'L', '#', '#', '.', '#', '#', '.', 'L', '#'],
                         ['#', '.', '#', '#', '.', 'L', 'L', '.', 'L', 'L'],
                         ['#', '.', '#', '#', '#', 'L', '#', '.', '#', '#'],
                         ['.', '.', '#', '.', '#', '.', '.', '.', '.', '.'],
                         ['#', 'L', '#', '#', '#', '#', '#', '#', 'L', '#'],
                         ['#', '.', 'L', 'L', '#', '#', '#', 'L', '.', 'L'],
                         ['#', '.', '#', 'L', '#', '#', '#', '.', '#', '#']]

    third_iteration = main.do_iteration(first_result_list)
    assert third_iteration == third_result_list


def test_stop_iteration():
    result_list = [['#', '.', '#', 'L', '.', 'L', '#', '.', '#', '#'],
                   ['#', 'L', 'L', 'L', '#', 'L', 'L', '.', 'L', '#'],
                   ['L', '.', '#', '.', 'L', '.', '.', '#', '.', '.'],
                   ['#', 'L', '#', '#', '.', '#', '#', '.', 'L', '#'],
                   ['#', '.', '#', 'L', '.', 'L', 'L', '.', 'L', 'L'],
                   ['#', '.', '#', 'L', '#', 'L', '#', '.', '#', '#'],
                   ['.', '.', 'L', '.', 'L', '.', '.', '.', '.', '.'],
                   ['#', 'L', '#', 'L', '#', '#', 'L', '#', 'L', '#'],
                   ['#', '.', 'L', 'L', 'L', 'L', 'L', 'L', '.', 'L'],
                   ['#', '.', '#', 'L', '#', 'L', '#', '.', '#', '#']]
    result_interrupt = main.search_stabilization(input_list)
    assert result_interrupt == result_list
